{"ast":null,"code":"import { canUseDOM } from './util';\n/**\n * This function creates a ResizeObserver used to handle resize events for the given containerRef. If ResizeObserver\n * or the given containerRef are not available, a window resize event listener is used by default.\n *\n * Example 1:\n *\n * private containerRef = React.createRef<HTMLDivElement>();\n * private observer: any = () => {};\n *\n * public componentDidMount() {\n *   this.observer = getResizeObserver(this.containerRef.current, this.handleResize);\n * }\n *\n * public componentWillUnmount() {\n *   this.observer();\n * }\n *\n * private handleResize = () => {\n *   if (this.containerRef.current && this.containerRef.current.clientWidth) {\n *     this.setState({ width: this.containerRef.current.clientWidth });\n *   }\n * };\n *\n * public render() {\n *   return (\n *     <div ref={this.containerRef} >\n *       <Chart width={this.state.width} ... />\n *     </div>\n *   );\n * }\n *\n * Example 2:\n *\n * private inputRef = React.createRef<HTMLInputElement>();\n * private observer: any = () => {};\n *\n * public componentDidMount() {\n *   this.observer = getResizeObserver(this.inputRef.current, this.handleResize);\n * }\n *\n * public componentWillUnmount() {\n *   this.observer();\n * }\n *\n * private handleResize = () => {\n *   if (this.inputRef.current) {\n *     trimLeft(inputRef.current, String(this.props.value));\n *   }\n * };\n *\n * public render() {\n *   return (\n *     <input ref={this.inputRef} ... />\n *   );\n * }\n *\n * Example 3 - With debounced method passed in:\n *\n * public componentDidMount() {\n *   this.observer = getResizeObserver(this.inputRef.current, debounce(this.handleResize, 250), false);\n * }\n *\n * @param {Element} containerRefElement The container reference to observe\n * @param {Function} handleResize The function to call for resize events\n * @param {boolean} useRequestAnimationFrame Whether to pass the handleResize function as a callback to requestAnimationFrame. Pass in false when the function passed in is debounced. Defaults to true.\n * @return {Function} The function used to unobserve resize events\n */\nexport const getResizeObserver = (containerRefElement, handleResize, useRequestAnimationFrame = true) => {\n  let unobserve;\n  if (canUseDOM) {\n    const {\n      ResizeObserver\n    } = window;\n    if (containerRefElement && ResizeObserver) {\n      const resizeObserver = new ResizeObserver(entries => {\n        // Wrap resize function in requestAnimationFrame to avoid \"ResizeObserver loop limit exceeded\" errors\n        if (useRequestAnimationFrame) {\n          window.requestAnimationFrame(() => {\n            if (Array.isArray(entries) && entries.length > 0) {\n              handleResize();\n            }\n          });\n          // Avoid wrapping function in requestAnimationFrame if the function is debounced\n        } else {\n          if (Array.isArray(entries) && entries.length > 0) {\n            handleResize();\n          }\n        }\n      });\n      resizeObserver.observe(containerRefElement);\n      unobserve = () => resizeObserver.unobserve(containerRefElement);\n    } else {\n      window.addEventListener('resize', handleResize);\n      unobserve = () => window.removeEventListener('resize', handleResize);\n    }\n  }\n  return () => {\n    if (unobserve) {\n      unobserve();\n    }\n  };\n};","map":{"version":3,"sources":["../../../src/helpers/resizeObserver.tsx"],"names":[],"mappings":"AAAA,SAAS,SAAS,QAAQ,QAAQ;AAElC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkEG;AACH,OAAO,MAAM,iBAAiB,GAAG,CAC/B,mBAA4B,EAC5B,YAAwB,EACxB,wBAAA,GAAoC,IAAI,KACtC;EACF,IAAI,SAAc;EAElB,IAAI,SAAS,EAAE;IACb,MAAM;MAAE;IAAc,CAAE,GAAG,MAAa;IAExC,IAAI,mBAAmB,IAAI,cAAc,EAAE;MACzC,MAAM,cAAc,GAAG,IAAI,cAAc,CAAE,OAAY,IAAI;QACzD;QACA,IAAI,wBAAwB,EAAE;UAC5B,MAAM,CAAC,qBAAqB,CAAC,MAAK;YAChC,IAAI,KAAK,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,OAAO,CAAC,MAAM,GAAG,CAAC,EAAE;cAChD,YAAY,CAAA,CAAE;YACf;UACH,CAAC,CAAC;UACF;SACD,MAAM;UACL,IAAI,KAAK,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,OAAO,CAAC,MAAM,GAAG,CAAC,EAAE;YAChD,YAAY,CAAA,CAAE;UACf;QACF;MACH,CAAC,CAAC;MACF,cAAc,CAAC,OAAO,CAAC,mBAAmB,CAAC;MAC3C,SAAS,GAAG,CAAA,KAAM,cAAc,CAAC,SAAS,CAAC,mBAAmB,CAAC;KAChE,MAAM;MACL,MAAM,CAAC,gBAAgB,CAAC,QAAQ,EAAE,YAAY,CAAC;MAC/C,SAAS,GAAG,CAAA,KAAM,MAAM,CAAC,mBAAmB,CAAC,QAAQ,EAAE,YAAY,CAAC;IACrE;EACF;EACD,OAAO,MAAK;IACV,IAAI,SAAS,EAAE;MACb,SAAS,CAAA,CAAE;IACZ;EACH,CAAC;AACH,CAAC","sourceRoot":"","sourcesContent":["import { canUseDOM } from './util';\n/**\n * This function creates a ResizeObserver used to handle resize events for the given containerRef. If ResizeObserver\n * or the given containerRef are not available, a window resize event listener is used by default.\n *\n * Example 1:\n *\n * private containerRef = React.createRef<HTMLDivElement>();\n * private observer: any = () => {};\n *\n * public componentDidMount() {\n *   this.observer = getResizeObserver(this.containerRef.current, this.handleResize);\n * }\n *\n * public componentWillUnmount() {\n *   this.observer();\n * }\n *\n * private handleResize = () => {\n *   if (this.containerRef.current && this.containerRef.current.clientWidth) {\n *     this.setState({ width: this.containerRef.current.clientWidth });\n *   }\n * };\n *\n * public render() {\n *   return (\n *     <div ref={this.containerRef} >\n *       <Chart width={this.state.width} ... />\n *     </div>\n *   );\n * }\n *\n * Example 2:\n *\n * private inputRef = React.createRef<HTMLInputElement>();\n * private observer: any = () => {};\n *\n * public componentDidMount() {\n *   this.observer = getResizeObserver(this.inputRef.current, this.handleResize);\n * }\n *\n * public componentWillUnmount() {\n *   this.observer();\n * }\n *\n * private handleResize = () => {\n *   if (this.inputRef.current) {\n *     trimLeft(inputRef.current, String(this.props.value));\n *   }\n * };\n *\n * public render() {\n *   return (\n *     <input ref={this.inputRef} ... />\n *   );\n * }\n *\n * Example 3 - With debounced method passed in:\n *\n * public componentDidMount() {\n *   this.observer = getResizeObserver(this.inputRef.current, debounce(this.handleResize, 250), false);\n * }\n *\n * @param {Element} containerRefElement The container reference to observe\n * @param {Function} handleResize The function to call for resize events\n * @param {boolean} useRequestAnimationFrame Whether to pass the handleResize function as a callback to requestAnimationFrame. Pass in false when the function passed in is debounced. Defaults to true.\n * @return {Function} The function used to unobserve resize events\n */\nexport const getResizeObserver = (containerRefElement, handleResize, useRequestAnimationFrame = true) => {\n    let unobserve;\n    if (canUseDOM) {\n        const { ResizeObserver } = window;\n        if (containerRefElement && ResizeObserver) {\n            const resizeObserver = new ResizeObserver((entries) => {\n                // Wrap resize function in requestAnimationFrame to avoid \"ResizeObserver loop limit exceeded\" errors\n                if (useRequestAnimationFrame) {\n                    window.requestAnimationFrame(() => {\n                        if (Array.isArray(entries) && entries.length > 0) {\n                            handleResize();\n                        }\n                    });\n                    // Avoid wrapping function in requestAnimationFrame if the function is debounced\n                }\n                else {\n                    if (Array.isArray(entries) && entries.length > 0) {\n                        handleResize();\n                    }\n                }\n            });\n            resizeObserver.observe(containerRefElement);\n            unobserve = () => resizeObserver.unobserve(containerRefElement);\n        }\n        else {\n            window.addEventListener('resize', handleResize);\n            unobserve = () => window.removeEventListener('resize', handleResize);\n        }\n    }\n    return () => {\n        if (unobserve) {\n            unobserve();\n        }\n    };\n};\n//# sourceMappingURL=resizeObserver.js.map"]},"metadata":{},"sourceType":"module"}